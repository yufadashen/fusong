<!DOCTYPE html>
<HTML>
<HEAD>
	<TITLE> ZTREE DEMO - select menu</TITLE>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<link rel="stylesheet" href="css/demo.css" type="text/css">
	<link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css" type="text/css">
	<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
	<script type="text/javascript" src="js/jquery.ztree.core-3.4.js"></script>
	<script type="text/javascript" src="js/jquery.ztree.excheck-3.4.js"></script>
	<script type="text/javascript" src="z_checkBox_tree.js"></script>
	<SCRIPT type="text/javascript">
		<!--
					var zNodeArray = [{"id":"1","pId":"0","name":"日常任务","type":"1"},
								  {"id":"2","pId":"0","name":"现场检查","type":"1","nocheck":"true"},
								  {"id":"3","pId":"1","name":"上级来文","type":"2"},
								  {"id":"4","pId":"1","name":"内部文件","type":"2"},
								  {"id":"5","pId":"2","name":"污染源","type":"2"},
								  {"id":"6","pId":"2","name":"建设项目","type":"2"},
								  {"id":"7","pId":"3","name":"上级来文1","type":"3"},
								  {"id":"8","pId":"3","name":"上级来文2","type":"3"},
								  {"id":"9","pId":"4","name":"内部文件1","type":"3"},
								  {"id":"10","pId":"4","name":"内部文件2","type":"3"}
								  ];
								  
					//var url =  "task_create_tree.do"; //if isDymamic is true
					var url= zNodeArray; //if isDynamic is false
					var iconInfoArray = new Array();
						iconInfoArray[0]={"type":"1","iconClose":"css/zTreeStyle/img/diy/1_open.png","iconOpen":"css/zTreeStyle/img/diy/1_close.png"};
						iconInfoArray[1]={"type":"2","iconClose":"css/zTreeStyle/img/diy/2.png","iconOpen":"css/zTreeStyle/img/diy/3.png"};				
					var psRelation = {"Y":"ps","N":"ps"};
					var boxSize = {"width":"280px","height":""};
					
					function testresfunc(obj){
						//alert(obj[0]["name"]);
						for(var i= 0;i<obj.length;i++){
							//alert(obj[i].icon);
						}
					}
			
		//-->
	</SCRIPT>
	<style type="text/css">
	</style>
 </HEAD>
<BODY>
<h1>下拉菜单  -- zTree</h1>
<div class="content_wrap">
	<div class="zTreeDemoBackground left">
		<ul class="list">
			<li class="title">&nbsp;&nbsp;<span class="highlight_red"></span></li>
			<li class="title">&nbsp;&nbsp;Test: 
				 <input  id="idsel" type="hidden" />
				 <input id="citySel" type="text"  onclick="showMenu(false,false,url,'citySel','idsel','',testresfunc,iconInfoArray,true,psRelation,boxSize);" readonly value="" style="width:120px;"/>
		&nbsp;</li>
		</ul>
		<ul class="list">
			<li class="title">&nbsp;&nbsp;<span class="highlight_red"></span></li>
			<li class="title">&nbsp;&nbsp;Test: 
				 <input  id="idsel1" type="hidden" />
				 <input id="citySel1" type="text"  onclick="showMenu(true,false,url,'citySel1','idsel1','',testresfunc,iconInfoArray,true,psRelation,null);" readonly value="" style="width:120px;" />
		&nbsp;</li>
		</ul>
	</div>
	
	
	
	<div class="right">
		<ul class="info">
			<li class="title"><h2>z_checkBox_tree.js 使用说明</h2>
				<ol class="list">
					<li>此为一个封装自ztree的树形菜单控件</li>
					<li>支持单选菜单和多选菜单，</li>
					<li>支持动态和静态获取数据，</li>
					<li>支持回调，</li>
					<li>支持自定义图片；</li>
					<li>可设置单选菜单是否只能选择叶子节点；</li>
					<li>可设置多选菜单父子节点间的关联关系；</li>
					<li>可设置选择菜单框的宽度和高度；</li>
				</ol>
			</li>
		</ul>
	</div>
	<div class="right">
		<ul class="info">
			<li class="title"><h2>使用步骤：</h2>
				<ul class="list">
					<li>
						1，使用前导入jquery,ztree相关js, css;
						列表如下：zTreeStyle.css  demo.css  jquery-1.4.4.min.js jquery.ztree.core-3.4.js  jquery.ztree.excheck-3.4.js
					
					</li>
					<li>
						2,导入z_checkBox_tree.js
					</li>
					<li>
						3,在页面js中调用函数 
						<b>showMenu</b>
					</li>
				</ul>
			</li>
		</ul>
		
		<table border="1" width="600px">
								<tr>
									<td colspan="2">函数showMenu(treeType,isDynamic,url,inputId,imageId,resFun,iconInfo,isSelectLeafOnly,psRelation,boxSize) 说明如下：

									</td>
									<td></td>	
								</tr>
								<tr>
										<td>treeType</td>
										<td>
											 树类型 ;<br>
					 							若为true则为多选菜单，false为单选菜单;<br>
					 							是否可为空：不可为空;	<br>
										</td>	
								</tr>	
								<tr>
										<td>isDynamic</td>
										<td>是否动态获取数据; <br>
											若为true，动态获<td>>
											是否可为空：不可为空;<br>
										</td>	
								</tr>
								<tr>
									<td>url</td>
									<td align="left">
											为获取数据的url或者为静态数据。<br>
											若isDynamic为true， url为获取数据的url；若isDynamic为false，url为组织的静态数据；<br>
											数据格式为json格式的数组；格式如下：<br>
											<pre>
										var zNodeArray = [{"id":"1","pId":"0","name":"日常任务","type":"1"},
								  					{"id":"2","pId":"0","name":"现场检查","type":"1"},
								  					{"id":"3","pId":"1","name":"上级来文","type":"2"},
								  					{"id":"4","pId":"1","name":"内部文件","type":"2"},
								  					{"id":"5","pId":"2","name":"污染源","type":"2"},
								  					{"id":"6","pId":"2","name":"建设项目","type":"2"},
								  					{"id":"7","pId":"3","name":"上级来文1","type":"3"},
								  					{"id":"8","pId":"3","name":"上级来文2","type":"3"},
								  					{"id":"9","pId":"4","name":"内部文件1","type":"3"},
								  					{"id":"10","pId":"4","name":"内部文件2","type":"3"}
								  				];</pre><br>
										格式说明：id为节点唯一标识；<br>
										pId为节点父节点标识；<br>
										name为节点在菜单中显示的名称；<br>
										type为自定义图标的参数，当type值和iconInfoArray中type值相同时，显示iconInfoArray中定义的图标；<br>			  				
										nocheck 为节点是否可选，为true时当前节点不可选；<br>
										open 设置节点的展开、折叠状态；为true时节点展开；<br>
										更多请参见zTree API；<br>
										是否可为空：不可为空;<br>
										若需要动态获取数据,可参见：TaskTypeAction.java中create_tree()方法;
										</td>	
								</tr>
								<tr>
									<td>inputId</td>
									<td>输入框id ;<br>
	 									是否可为空：不可为空;<br>
	 								</td>	
								</tr>	
								<tr>
									<td>hiddenId</td>
									<td>隐藏域id;<br>
	 									是否可为空：不可为空;<br>
	 								</td>	
								</tr>
								<tr>
									<td>resFun</td>
									<td>回调函数方法名。<br>此回调函数的参数为一个json格式数组，数组中包含所有当前已选中的节点信息；<br>
	 										如果没有回调，应该设为null；<br>
	 										是否可为空：可以为null;</td>	
								</tr>
								<tr>
									<td>iconInfo</td>
									<td>自定义图片信息；<br>
										类型为json格式的数组。若不自定义图片，应该设为null;<br>
	 									格式如下：<br>
	 								<pre>
	 								var iconInfoArray = new Array();
										iconInfoArray[0]={"type":"1","iconClose":"<user:skin value='/scripts/zTree-v3.4/css/zTreeStyle/img/diy/1_open.png'/>","iconOpen":"<user:skin value='/scripts/zTree-v3.4/css/zTreeStyle/img/diy/1_close.png'/>"};
										iconInfoArray[1]={"type":"2","iconClose":"<user:skin value='/scripts/zTree-v3.4/css/zTreeStyle/img/diy/2.png'/>","iconOpen":"<user:skin value='/scripts/zTree-v3.4/css/zTreeStyle/img/diy/3.png'/>"};				
									</pre>		
									格式说明：<br>
									type 对应获取数据中的type<br>
									iconClose 菜单关闭时图标路径<br>
									iconOpen 菜单打开时图标路径	<br>
	 								是否可为空：可以为null;<br></td>	
								</tr>
								<tr>
									<td>isSelectLeafOnly</td>
									<td>是否只能选择叶子节点；只针对单选菜单有效；<br>
										若为true只能选择叶子节点，false相反；<br>
										如果要控制多选菜单的节点是否可选，可设置nocheck为true;<br>
										是否可为空：不可为空;</td>	
								</tr>
								<tr>
									<td>psRelation</td>
									<td>父子节点关联关系；只对多选菜单有效；<br>
											格式如下：<br>
											var psRelation = {"Y":"ps","N":"s"};<br>
											格式说明：<br>
											Y 设置被勾选时的关联关系<br>
											N	设置取消勾选时的关联关系<br>
											"p" 表示操作会影响父级节点；<br>
											"s" 表示操作会影响子级节点；<br>
											"ps"表示操作会影响父子节点；	<br>
											请注意大小写，不要改变	<br>
											是否可为空：可以为null; 当为null时，父子节点没有关联；<br></td>	
								</tr>
								<tr>
									<td>boxSize</td>
									<td>选择菜单框大小设置<br>
											如果不设置菜单框大小，应该传入null;若为null显示默认大小；
											格式如下：<br>
											var boxSize = {"width":"300px","height":"450px"};<br>
											格式说明：<br>
											width:菜单框宽度，可以为空；<br>
											height：菜单框高度，可以为空；<br>
											<br>
									</td>	
								</tr>
								
						</table>
		
	</div>
</div>

</BODY>
</HTML>